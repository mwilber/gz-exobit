(()=>{"use strict";const t=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"approved",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"_key",type:"string"}],name:"autoMint",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"_data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"",type:"string"}],name:"_keyId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"JsSource",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"keys",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"_key",type:"string"}],name:"ownerOfKey",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"_key",type:"string"}],name:"tokenByKey",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenOfOwnerByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_owner",type:"address"}],name:"tokensOfOwner",outputs:[{internalType:"uint256[]",name:"ownerTokens",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}];class f{constructor(t){this.ctx=t.ctx,this.slowmo=!1,this.slowmoDelay=t.slowmoDelay,this.renderCallback=t.renderCallback,this.instructions=[]}EnableSlowMode(t){this.slowmo=!t}async UpdateCanvas(){if(!this.updatingCanvas){this.updatingCanvas=!0;for(let t of this.instructions){if(!this.updatingCanvas)return;this.slowmo&&await this.Delay(this.slowmoDelay),"function"==typeof t&&t()}this.updatingCanvas=!1,"function"==typeof this.renderCallback&&this.renderCallback()}}ResetUpdateCanvas(){this.updatingCanvas=!1,this.instructions=[]}ScaleContext(t){this.instructions.push(this._scaleContext.bind({ctx:this.ctx},t))}DrawAtmosphere(t){this.instructions.push(this._drawAtmosphere.bind({ctx:this.ctx},t))}DrawPoint(t,f,e){this.instructions.push(this._drawPoint.bind({ctx:this.ctx},t,f,e))}DrawCol(t,f,e,a){this.instructions.push(this._drawCol.bind({ctx:this.ctx},t,f,e,a))}_scaleContext(t){this.ctx.scale(t,t)}_drawAtmosphere(t){const{height:f,width:e}=this.ctx.canvas||{};this.ctx.fillStyle=t,this.ctx.fillRect(0,0,f,e)}_drawPoint(t,f,e){let{fillStyle:a}=this.ctx;this.ctx.fillStyle=e,this.ctx.fillRect(Math.round(t),Math.round(f),1,1),this.ctx.fillStyle=a}_drawCol(t,f,e,a){let{fillStyle:n}=this.ctx;this.ctx.fillStyle=a,this.ctx.fillRect(Math.round(t),Math.round(f),1,Math.round(e)),this.ctx.fillStyle=n}SortBodyData(t,f){let e=t;return e=t.sort(((t,f)=>f-t)),1===f||(e=t.sort(((t,f)=>t-f)),2===f||(e=t=[...t.filter(((t,f)=>f%2)),...t.filter(((t,f)=>!(f%2))).sort(((t,f)=>f-t))],3===f||(e=t=[...t.filter(((t,f)=>f%2)),...t.filter(((t,f)=>!(f%2)))]))),e}DrawStar(t,f,e){for(let a=e;a>=0;a--){let n=255-a/(e+1)*255,i=this.GetGreyColor(n);for(let n=-e*a;n<=e*a;n++)for(let e=-a;e<=a;e++)this.DrawPoint(t+n,f+e,i),this.DrawPoint(t+e,f+n,i)}}DrawMoon(t,f,e,a){for(let n=t-e;n<=t+e;n++){const i=Math.floor(2*Math.sqrt(Math.pow(e,2)-Math.pow(n-t,2)));this.DrawCol(n,f-Math.floor(i/2),i,a)}}BodyBrush(t,f,e,a){for(let n=0;n<t.length;n++){let i=t[n]/4,s="rgba(255,255,255,0.8)",r="rgba(0,0,0,0.8)";for(let o=0;o<i;o++){let d=e+(o-i/2),c=a-t.length/2+n,l=!1,h=!1;n>0&&(l=(i-t[n-1]/4)/2),n<t.length-1&&(h=Math.ceil((i-t[n+1]/4)/2)),(!1===l||o<l||o>i-l)&&(this.DrawPoint(d,c-1,f),this.DrawPoint(d,c-1,s)),this.DrawPoint(d,c,f),(!1===h||o<h||o>i-h)&&(this.DrawPoint(d,c+1,f),this.DrawPoint(d,c+1,r))}}}DrawAsset(t){let{asset:f,x:e,y:a,fillColor:n,mirrorH:i}=t;if(!f)return;const s=(t,f,e)=>{switch(e){case 1:this.DrawPoint(t,f,r);break;case 2:this.DrawPoint(t,f,o);break;case 3:this.DrawPoint(t,f,n);break;default:return}},r=this.GetGreyColor(0),o=this.GetGreyColor(255);n=n||this.GetGreyColor(128);for(let t=0;t<f.length;t++)if(i)for(let n=0;n<f[t].length;n++)s(e-n,a+t,f[t][n]);else for(let n=0;n<f[t].length;n++)s(e+n,a+t,f[t][n])}GetGreyColor(t){return"rgb("+t+","+t+","+t+")"}Delay(t){return new Promise((f=>{setTimeout((()=>{f("")}),t)}))}ResetContext(){this.updatingCanvas||(this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height))}}const e=function(){this.SetupStats(),this.artGenerator.EnableSlowMode(!0),"subject"!==this.renderMode&&this.artGenerator.DrawAtmosphere("#000000"),this.artGenerator.ScaleContext(2),this.DrawStarfield(),this.DrawCelestialBodies(),this.artGenerator.ScaleContext(2),this.DrawLandscape(),this.DrawGround(),"subject"!==this.renderMode&&this.artGenerator.DrawAtmosphere(this.colorPalette.atmosphere),this.ProbabilitySelect(30,.25,31,[()=>this.DrawBodyPart("batwing",5,-18,null,!0),()=>this.DrawBodyPart("butterflywing",0,-10,this.colorPalette.bodSecondary,!0)]),this.DrawBody(this.bodPos.x,this.bodPos.y),this.ProbabilitySelect(28,.25,29,[()=>this.DrawBodyPart("antannae",2,-19,null,!0),()=>this.DrawBodyPart("fin","y-13","3|-2",this.colorPalette.bodPrimary,!0)]),this.ProbabilitySelect(44,.5,45,[()=>this.DrawBodyPart("hair",-18,-15,this.artGenerator.GetGreyColor(0)),()=>this.DrawBodyPart("hair",-18,-15,this.colorPalette.hair),()=>this.DrawBodyPart("horns",-13,-10,this.colorPalette.hair),()=>this.DrawBodyPart("feathers",-17,-20,this.colorPalette.hair)]),this.ProbabilitySelect(26,1,27,[()=>this.DrawBodyPart("eyes",-8,1,null),()=>this.DrawBodyPart("sleepyeyes",-8,1,this.colorPalette.bodPrimary),()=>this.DrawBodyPart("angryeyes",-11,1,null),()=>this.DrawBodyPart("zetaeyes",-11,3,null)]),this.ProbabilitySelect(24,.75,25,[()=>this.DrawBodyPart("leganthro","y",28,this.colorPalette.bodPrimary,!0),()=>this.DrawBodyPart("tentacle","y-7","29|-20",this.colorPalette.bodPrimary,!0),()=>this.DrawBodyPart("leginsect","y-10",31,this.colorPalette.bodPrimary,!0)]),this.ProbabilitySelect(24,.75,25,[()=>this.DrawBodyPart("flipper","y","12|-0",this.colorPalette.bodPrimary,!0),()=>this.DrawBodyPart("armanthro","y-20",17,this.colorPalette.bodPrimary,!0),()=>this.DrawBodyPart("pincer","y","10|-13",this.colorPalette.bodPrimary,!0)]),this.ProbabilitySelect(32,.1,33,[()=>this.DrawBodyPart("precog",-40,-35,this.colorPalette.tk),()=>this.DrawBodyPart("telekinesis",-42,-30,this.colorPalette.tk)])},a=function(){let t={home:[],biology:[],attributes:[]},f=this.stats.atmosphere.b/255*100,e=this.stats.atmosphere.g/255*100,a=this.stats.atmosphere.r/255*100,n=100/(f+e+a);f=Math.floor(f*n),e=Math.floor(e*n),a=Math.floor(a*n);let i=0,s=this.stats.mountains.reduce(((t,f)=>(f>90&&i++,f>t?f:t)),90);s*=30;let r="Oceanic";i>4?r="Highlands":i>2&&(r="Flat Lands");let o=this.bodyTypes[this.stats.body.type-1],d="Friendly";this.stats.attributes.includes("angryeyes")&&(d="Aggressive"),this.stats.attributes.includes("zetaeyes")&&(d="Enigmatic"),this.stats.attributes.includes("sleepyeyes")&&(d="Languid");let c=!!this.stats.attributes.find((t=>"Wings"==this.assets[t].label)),l=!!this.stats.attributes.find((t=>"Biped"==this.assets[t].label||"Quadraped"==this.assets[t].label||"Tentacles"==this.assets[t].label)),h=!!this.stats.attributes.find((t=>"Fins"==this.assets[t].label||"Flippers"==this.assets[t].label||"Tentacles"==this.assets[t].label)),p=[];c&&p.push("Aerial"),l&&p.push("Terrestrial"),h&&p.push("Aquatic");let y=[];4==this.stats.body.type&&y.push("arthro"),3==this.stats.body.type&&y.push("mollusca"),2==this.stats.body.type&&y.push("coelenterata"),1==this.stats.body.type&&y.push("chordata"),c&&y.push("tera"),l&&y.push("pod"),h&&y.unshift("ichthy"),y[0]=y[0][0].toUpperCase()+y[0].substring(1),t.home.push(["Name",this.stats.planet]),t.home.push(["Atmospheric Composition",`Oxygen (${f}%), Helium (${e}%), Nitrogen (${a}%)`]),t.home.push(["Moons",this.stats.moons.length]),t.home.push(["Region",`${r} (Peaks: ${i} Highest Elevation: ${s}M)`]),t.biology.push(["Species",y.join("")]),this.SetTokenMetaAttribute("Species",y.join("")),t.biology.push(["Body Type",o]),this.SetTokenMetaAttribute("Body Type",o),t.biology.push(["Temperament",d]),this.SetTokenMetaAttribute("Temperament",d),t.biology.push(["Environment",p.join(" / ")]),p.forEach((t=>this.SetTokenMetaAttribute("Environment",t))),this.stats.attributes.forEach((t=>this.SetTokenMetaAttribute("Characteristic",this.assets[t].label)));let b=t=>{let[f,e]=t;return`\n\t\t\t<li>\n\t\t\t\t<strong>${f}:</strong> ${e}\n\t\t\t</li>\n\t\t`},u=this.metaData.name?this.metaData.name:"Stats",m=this.metaData.number?"ExoBit #"+this.metaData.number:"",g="\n\t\t<p>Settings are available only to the owner of this Exobit. Mint this token to gain access.</p>\n\t";this.ownerMode&&(g=`\n\t\t\t<button id="slowmo">SlowMo Redraw</button>\n\t\t\t<button id="subject" class="${"subject"===this.renderMode?"active":""}">Subject Only</button>\n\t\t\t<button id="background" class="${"background"===this.renderMode?"active":""}">Background Only</button>\n\t\t\t<button id="download">Download Image</button>\n\t\t`);let w=`\n\t\t<h1>\n\t\t\t<span class="exo-name">${u}</span>\n\t\t\t<span class="exo-number">${m}</span>\n\t\t</h1>\n\t\t<div class="col wide">\n\t\t\t<div class="group">\n\t\t\t\t<h2>Biology</h2>\n\t\t\t\t<ul class="biology">\n\t\t\t\t\t${t.biology.map((t=>b(t))).join("")}\n\t\t\t\t</ul>\n\t\t\t\t<h2>Attributes</h2>\n\t\t\t\t<ul class="attributes">\n\t\t\t\t\t${this.stats.attributes.map((t=>`<li>${this.assets[t].label}</li>`)).join("")}\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="col">\n\t\t\t<div class="group settings">\n\t\t\t\t<h2>Image Settings</h2>\n\t\t\t\t${g}\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="group homeworld">\n\t\t\t<h2>Homeworld</h2>\n\t\t\t<ul class="homeworld">\n\t\t\t\t${t.home.map((t=>b(t))).join("")}\n\t\t\t</ul>\n\t\t</div>\n\t\t<a id="gz-logo" href="https://exobits.greenzeta.com" target="_blank">\n\t\t<svg viewBox="0 0 140 33" enable-background="new 0 0 140 33">\n\t\t\t<g id="Layer_1">\n\t\t\t\t<rect opacity="0.8" width="140" height="33"/>\n\t\t\t\t<rect x="108.25" fill="#7CB750" width="33" height="33"/>\n\t\t\t</g>\n\t\t\t<g id="Zeta">\n\t\t\t\t<g>\n\t\t\t\t\t<path fill="#FFFFFF" d="M123.438,7.591c0.875-0.638,1.693-1.105,2.455-1.401c0.76-0.296,1.52-0.444,2.275-0.444\n\t\t\t\t\t\tc0.629,0,1.104,0.089,1.422,0.267c0.319,0.178,0.479,0.444,0.479,0.8c0,0.52-0.371,0.935-1.113,1.244\n\t\t\t\t\t\tc-0.744,0.31-1.753,0.465-3.029,0.465c-0.419,0-0.811-0.011-1.176-0.034c-0.364-0.022-0.72-0.062-1.066-0.116\n\t\t\t\t\t\tc-0.957,0.848-1.713,1.953-2.27,3.315c-0.556,1.363-0.834,2.796-0.834,4.3c0,1.54,0.352,2.65,1.053,3.329\n\t\t\t\t\t\tc0.702,0.68,1.851,1.019,3.445,1.019c0.265,0,0.666-0.019,1.203-0.055c0.538-0.036,0.943-0.055,1.217-0.055\n\t\t\t\t\t\tc1.386,0,2.402,0.239,3.049,0.718c0.647,0.479,0.971,1.229,0.971,2.249c0,1.395-0.559,2.475-1.674,3.24\n\t\t\t\t\t\tc-1.117,0.766-2.696,1.148-4.738,1.148c-0.61,0-1.08-0.087-1.408-0.26s-0.492-0.419-0.492-0.738c0-0.292,0.107-0.515,0.322-0.67\n\t\t\t\t\t\tc0.213-0.155,0.525-0.232,0.936-0.232c0.273,0,0.752,0.094,1.436,0.28s1.271,0.28,1.764,0.28c0.83,0,1.527-0.203,2.092-0.608\n\t\t\t\t\t\tc0.565-0.405,0.848-0.904,0.848-1.497c0-0.52-0.223-0.896-0.67-1.128c-0.446-0.232-1.185-0.349-2.215-0.349\n\t\t\t\t\t\tc-0.364,0-0.881,0.014-1.551,0.041s-1.151,0.041-1.443,0.041c-1.887,0-3.273-0.479-4.162-1.436s-1.334-2.447-1.334-4.471\n\t\t\t\t\t\tc0-1.668,0.299-3.213,0.896-4.635c0.596-1.422,1.496-2.743,2.699-3.965c-1.458-0.31-2.565-0.729-3.322-1.258\n\t\t\t\t\t\tc-0.756-0.528-1.135-1.135-1.135-1.818c0-0.729,0.36-1.294,1.08-1.695c0.721-0.401,1.732-0.602,3.035-0.602\n\t\t\t\t\t\tc0.273,0,0.488,0.009,0.643,0.027c0.155,0.019,0.306,0.046,0.451,0.082v0.697h-0.725c-0.811,0-1.417,0.137-1.818,0.41\n\t\t\t\t\t\tc-0.4,0.273-0.602,0.679-0.602,1.217c0,0.556,0.256,1.03,0.766,1.422C121.706,7.108,122.453,7.399,123.438,7.591z"/>\n\t\t\t\t</g>\n\t\t\t</g>\n\t\t\t<g id="Fonts">\n\t\t\t\t<g>\n\t\t\t\t\t<path fill="#FFFFFF" d="M18.958,15.641h5.538v0.443c0,1.008-0.118,1.897-0.355,2.674c-0.232,0.717-0.623,1.389-1.172,2.014\n\t\t\t\t\t\tc-1.244,1.401-2.827,2.1-4.749,2.1c-1.876,0-3.481-0.676-4.819-2.03c-1.336-1.359-2.005-2.991-2.005-4.896\n\t\t\t\t\t\tc0-1.945,0.681-3.594,2.041-4.949c1.36-1.36,3.015-2.04,4.966-2.04c1.047,0,2.026,0.214,2.935,0.643\n\t\t\t\t\t\tc0.869,0.428,1.722,1.123,2.561,2.083l-1.441,1.381c-1.1-1.464-2.439-2.197-4.02-2.197c-1.418,0-2.607,0.489-3.567,1.467\n\t\t\t\t\t\tc-0.961,0.961-1.441,2.165-1.441,3.611c0,1.494,0.535,2.724,1.605,3.689c1.001,0.898,2.087,1.347,3.255,1.347\n\t\t\t\t\t\tc0.996,0,1.891-0.337,2.684-1.009c0.792-0.677,1.235-1.487,1.328-2.43h-3.342V15.641z"/>\n\t\t\t\t\t<path fill="#FFFFFF" d="M26.666,14.166h1.955v0.754c0.359-0.376,0.677-0.634,0.954-0.773c0.285-0.144,0.62-0.217,1.007-0.217\n\t\t\t\t\t\tc0.516,0,1.054,0.168,1.614,0.504l-0.893,1.789c-0.369-0.267-0.732-0.399-1.085-0.399c-1.064,0-1.597,0.804-1.597,2.414v4.384\n\t\t\t\t\t\th-1.955V14.166z"/>\n\t\t\t\t\t<path fill="#FFFFFF" d="M40.896,18.853h-6.059c0.052,0.694,0.277,1.248,0.677,1.658c0.398,0.405,0.912,0.608,1.537,0.608\n\t\t\t\t\t\tc0.486,0,0.888-0.116,1.207-0.348c0.312-0.231,0.668-0.66,1.067-1.285l1.651,0.921c-0.257,0.434-0.525,0.805-0.809,1.114\n\t\t\t\t\t\tc-0.284,0.31-0.588,0.562-0.912,0.764c-0.324,0.199-0.674,0.348-1.05,0.439c-0.376,0.094-0.785,0.139-1.225,0.139\n\t\t\t\t\t\tc-1.262,0-2.275-0.404-3.04-1.214c-0.764-0.817-1.146-1.9-1.146-3.247c0-1.337,0.371-2.42,1.112-3.248\n\t\t\t\t\t\tc0.748-0.816,1.737-1.224,2.969-1.224c1.245,0,2.229,0.397,2.952,1.189c0.717,0.787,1.078,1.878,1.078,3.272L40.896,18.853z\n\t\t\t\t\t\tM38.891,17.256c-0.273-1.043-0.929-1.563-1.971-1.563c-0.237,0-0.46,0.037-0.668,0.107c-0.21,0.073-0.4,0.177-0.571,0.313\n\t\t\t\t\t\tc-0.169,0.137-0.315,0.299-0.438,0.49c-0.122,0.191-0.214,0.408-0.278,0.652H38.891z"/>\n\t\t\t\t\t<path fill="#FFFFFF" d="M50.733,18.853h-6.061c0.052,0.694,0.278,1.248,0.676,1.658c0.4,0.405,0.912,0.608,1.538,0.608\n\t\t\t\t\t\tc0.486,0,0.888-0.116,1.206-0.348c0.312-0.231,0.668-0.66,1.068-1.285l1.65,0.921c-0.256,0.434-0.525,0.805-0.81,1.114\n\t\t\t\t\t\tc-0.283,0.31-0.587,0.562-0.911,0.764c-0.325,0.199-0.673,0.348-1.05,0.439c-0.377,0.094-0.785,0.139-1.223,0.139\n\t\t\t\t\t\tc-1.263,0-2.275-0.404-3.04-1.214c-0.765-0.817-1.146-1.9-1.146-3.247c0-1.337,0.37-2.42,1.111-3.248\n\t\t\t\t\t\tc0.745-0.816,1.735-1.224,2.968-1.224c1.245,0,2.229,0.397,2.953,1.189c0.718,0.787,1.075,1.878,1.075,3.272L50.733,18.853z\n\t\t\t\t\t\tM48.727,17.256c-0.271-1.043-0.928-1.563-1.972-1.563c-0.236,0-0.458,0.037-0.668,0.107c-0.207,0.073-0.397,0.177-0.567,0.313\n\t\t\t\t\t\tc-0.173,0.137-0.316,0.299-0.438,0.49s-0.214,0.408-0.278,0.652H48.727z"/>\n\t\t\t\t\t<path fill="#FFFFFF" d="M52.868,14.166h1.962v0.78c0.685-0.677,1.452-1.016,2.31-1.016c0.983,0,1.751,0.31,2.3,0.928\n\t\t\t\t\t\tc0.475,0.527,0.712,1.387,0.712,2.58v5.183h-1.962v-4.724c0-0.832-0.116-1.409-0.347-1.728c-0.226-0.324-0.636-0.485-1.233-0.485\n\t\t\t\t\t\tc-0.647,0-1.108,0.213-1.381,0.643c-0.265,0.422-0.398,1.16-0.398,2.214v4.08h-1.962V14.166z"/>\n\t\t\t\t\t<path fill="#FFFFFF" d="M65.309,20.72h6.435v1.901h-9.76l6.582-11.503H63.06V9.216h8.829L65.309,20.72z"/>\n\t\t\t\t\t<path fill="#FFFFFF" d="M81.432,18.853h-6.061c0.052,0.694,0.277,1.248,0.677,1.658c0.398,0.405,0.912,0.608,1.537,0.608\n\t\t\t\t\t\tc0.485,0,0.889-0.116,1.206-0.348c0.312-0.231,0.668-0.66,1.069-1.285l1.648,0.921c-0.255,0.434-0.524,0.805-0.808,1.114\n\t\t\t\t\t\ts-0.587,0.562-0.912,0.764c-0.323,0.199-0.673,0.348-1.05,0.439c-0.377,0.094-0.784,0.139-1.225,0.139\n\t\t\t\t\t\tc-1.261,0-2.273-0.404-3.038-1.214c-0.764-0.817-1.146-1.9-1.146-3.247c0-1.337,0.369-2.42,1.11-3.248\n\t\t\t\t\t\tc0.747-0.816,1.738-1.224,2.97-1.224c1.243,0,2.229,0.397,2.951,1.189c0.717,0.787,1.076,1.878,1.076,3.272L81.432,18.853z\n\t\t\t\t\t\tM79.427,17.256c-0.273-1.043-0.93-1.563-1.973-1.563c-0.237,0-0.459,0.037-0.668,0.107c-0.208,0.073-0.398,0.177-0.569,0.313\n\t\t\t\t\t\tc-0.17,0.137-0.315,0.299-0.438,0.49c-0.12,0.191-0.214,0.408-0.277,0.652H79.427z"/>\n\t\t\t\t\t<path fill="#FFFFFF" d="M85.735,15.987v6.634h-1.953v-6.634H82.95v-1.822h0.832v-3.101h1.953v3.101h1.521v1.822H85.735z"/>\n\t\t\t\t\t<path fill="#FFFFFF" d="M94.974,14.166h1.963v8.456h-1.963v-0.886c-0.804,0.753-1.669,1.128-2.596,1.128\n\t\t\t\t\t\tc-1.169,0-2.136-0.422-2.9-1.268c-0.758-0.862-1.136-1.938-1.136-3.229c0-1.27,0.378-2.324,1.136-3.17\n\t\t\t\t\t\tc0.759-0.845,1.707-1.267,2.849-1.267c0.983,0,1.867,0.405,2.647,1.215V14.166z M90.338,18.367c0,0.81,0.217,1.471,0.652,1.978\n\t\t\t\t\t\tc0.445,0.517,1.006,0.774,1.684,0.774c0.723,0,1.308-0.249,1.753-0.747c0.445-0.514,0.669-1.169,0.669-1.962\n\t\t\t\t\t\tc0-0.794-0.224-1.446-0.669-1.962c-0.445-0.503-1.024-0.755-1.735-0.755c-0.672,0-1.232,0.254-1.685,0.765\n\t\t\t\t\t\tC90.561,16.972,90.338,17.609,90.338,18.367z"/>\n\t\t\t\t</g>\n\t\t\t</g>\n\t\t</svg>\n\t\t</a>\n\t`;this.profile.innerHTML=w,this.panelBackground&&(this.profile.style.backgroundImage=`url(${this.panelBackground})`);const k=this.profile.querySelector("#slowmo");k&&k.addEventListener("click",(t=>{t.preventDefault(),t.stopPropagation(),this.artGenerator.EnableSlowMode(),this.artGenerator.ResetContext(),this.artGenerator.UpdateCanvas(),this.FlipCard(t)}));const v=this.profile.querySelector("#background");v&&v.addEventListener("click",(t=>{t.preventDefault(),t.stopPropagation(),this.renderMode="background"!==this.renderMode?"background":"",this.artGenerator.ResetUpdateCanvas(),this.artGenerator.ResetContext(),this.Render(),this.RenderStats(),this.artGenerator.UpdateCanvas(),this.FlipCard(t)}));const M=this.profile.querySelector("#subject");M&&M.addEventListener("click",(t=>{t.preventDefault(),t.stopPropagation(),this.renderMode="subject"!==this.renderMode?"subject":"",this.artGenerator.ResetUpdateCanvas(),this.artGenerator.ResetContext(),this.Render(),this.RenderStats(),this.artGenerator.UpdateCanvas(),this.FlipCard(t)}));const x=this.profile.querySelector("#download");x&&x.addEventListener("click",(t=>{t.preventDefault(),t.stopPropagation();let f=document.createElement("a");f.download="exobit-"+this.key+".png",f.href=this.canvas.toDataURL(),f.click()}));const P=this.profile.querySelector("#gz-logo");P&&P.addEventListener("click",(t=>{t.stopPropagation()}))};window.customElements.define("gz-exobit",class extends HTMLElement{constructor(){super(),this.contractAddress="",this.Render=e,this.RenderStats=a,this.renderMode="default",this.ownerMode=!1,this.attachShadow({mode:"open"}),this.metaData={key:"",number:0,description:"",external_url:"",animation_url:"",background_color:"1b1b1b",image:"",name:"",attributes:[]},this.stars=["SPICA","VEGA","ARCTURUS","ANTARES","RIGEL","SIRIUS","PROCYON","BETA PICTORIS"],this.numerals=["I","II","III","IV","V","VI","VII","VIII"],this.bodyTypes=["Angular","Angular","Bulbous","Segmented"],this.bodPos={x:64,y:70}}async fetchMetadataFromUri(t){const f=await fetch(t),e=await f.json();return{key:e.key,name:e.name,number:e.number}}async connectedCallback(){let{uri:t,key:f,size:e,contract:a}=this.dataset||{};if("demo"===f)this.ownerMode=!0,this.key="2A97516C354B68848CDBD8F54A226A0A00FFFFD138E207AD6C5CBB9C000099FF";else if(t){let f=await this.fetchMetadataFromUri(t);f.key&&(this.key=this.metaData.key=f.key),f.name&&(this.metaData.name=f.name),f.number&&(this.metaData.number=f.number)}else f&&(this.key=this.metaData.key=f);if(!this.key||64!==this.key.length)return void console.log("key not found");this.contractAddress=a,e=e||512;const n=e/512;this.web3=window.web3instance||window.web3,this.shadowRoot.innerHTML=`\n\t\t\t<style>\n\t\t\t\t:host{\n\t\t\t\t\tdisplay: inline-block;\n\t\t\t\t\tposition: relative;\n\t\t\t\t\twidth: ${e}px;\n\t\t\t\t\theight: ${e}px;\n\t\t\t\t}\n\n\t\t\t\t.shield{\n\t\t\t\t\tposition: absolute;\n\t\t\t\t\ttop: 0;\n\t\t\t\t\tleft: 0;\n\t\t\t\t\theight: 100%;\n\t\t\t\t\twidth: 100%;\n\t\t\t\t\tbackground: transparent;\n\t\t\t\t\tz-index: 1000;\n\t\t\t\t}\n\n\t\t\t\t.flip-over{\n\t\t\t\t\tposition:absolute;\n\t\t\t\t\ttop: auto;\n\t\t\t\t\tleft: 50%;\n\t\t\t\t\tbottom: 15px;\n\t\t\t\t\ttransform: translateX(-50%);\n\t\t\t\t\twidth: 50px;\n\t\t\t\t\tz-index: 500;\n\t\t\t\t\ttransition: opacity 200ms 600ms;\n\t\t\t\t\tfont-size: 12px;\n\t\t\t\t\tline-height: 1;\n\t\t\t\t\tfont-family: sans-serif;\n\t\t\t\t\tcolor: #fff;\n\t\t\t\t\ttext-align: center;\n\t\t\t\t}\n\n\t\t\t\t#flip-over{\n\t\t\t\t\twidth: 50%;\n\t\t\t\t}\n\n\t\t\t\t.container{\n\t\t\t\t\tposition: relative;\n\t\t\t\t\twidth: 512px;\n\t\t\t\t\theight: 512px;\n\t\t\t\t\ttransform: scale(${n});\n\t\t\t\t\ttransform-origin: top left;\n\t\t\t\t\tperspective: 2000px;\n\t\t\t\t}\n\n\t\t\t\t.card{\n\t\t\t\t\tposition: absoulte;\n\t\t\t\t\twidth: 100%;\n\t\t\t\t\theight: 100%;\n\t\t\t\t\ttext-align: center;\n\t\t\t\t\ttransition: transform 0.8s;\n\t\t\t\t\ttransform-style: preserve-3d;\n\t\t\t\t\ttransform-origin: center;\n\t\t\t\t}\n\n\t\t\t\t.container.flip .card {\n\t\t\t\t\ttransform: rotateY(180deg);\n\t\t\t\t}\n\n\t\t\t\t.container.flip .flip-over{\n\t\t\t\t\topacity: 0;\n\t\t\t\t\ttransition: opacity 100ms;\n\t\t\t\t}\n\n\t\t\t\t.avatar{\n\t\t\t\t\tposition: absolute;\n\t\t\t\t\tz-index: 0;\n\t\t\t\t\tdisplay: block;\n\t\t\t\t\tbackground: #00ff00 url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAIAAACRXR/mAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RUY1RjdFOTJDNzEwMTFFQjk5M0NGQ0JFRTE5RjcxNTUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RUY1RjdFOTNDNzEwMTFFQjk5M0NGQ0JFRTE5RjcxNTUiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpFRjVGN0U5MEM3MTAxMUVCOTkzQ0ZDQkVFMTlGNzE1NSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpFRjVGN0U5MUM3MTAxMUVCOTkzQ0ZDQkVFMTlGNzE1NSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PtGIkuAAAABRSURBVHja7NFRDQAhDERBQE39m2ndFBO9HB/zBGwm2Z2Za6iImJo668mwsLCwsLCwsLCwsLCwfmp399RWVTkRCwsLCwsLCwsLCwsL64uuAAMAb0oI5cT0mOEAAAAASUVORK5CYII=") top left repeat;\n\t\t\t\t\t\n\t\t\t\t\t-webkit-backface-visibility: hidden; /* Safari */\n  \t\t\t\t\tbackface-visibility: hidden;\n\t\t\t\t}\n\t\t\t\t.profile{\n\t\t\t\t\tposition: absolute;\n\t\t\t\t\tz-index: 10;\n\t\t\t\t\twidth: calc(512px - 4em);\n\t\t\t\t\theight: calc(512px - 1em);\n\t\t\t\t\tbackground: rgba(0,0,0,0.5);\n\t\t\t\t\tpadding: 1em 2em 0 2em;\n\t\t\t\t\ttransition: opacity 500ms;\n\t\t\t\t\toverflow: auto;\n\t\t\t\t\tfont-size: 12px;\n\t\t\t\t\tfont-family: sans-serif;\n\t\t\t\t\tline-height: 1;\n\t\t\t\t\tcolor: #ffffff;\n\t\t\t\t\ttext-align: left;\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\tflex-wrap: wrap;\n\t\t\t\t\talign-content: flex-start;\n\n\t\t\t\t\t-webkit-backface-visibility: hidden; /* Safari */\n  \t\t\t\t\tbackface-visibility: hidden;\n\t\t\t\t\ttransform: rotateY(180deg);\n\t\t\t\t}\n\t\t\t\t.profile:before{\n\t\t\t\t\tcontent: '';\n\t\t\t\t\tdisplay: block;\n\t\t\t\t\tposition: absolute;\n\t\t\t\t\twidth: 100%;\n\t\t\t\t\theight: 100%;\n\t\t\t\t\tbackground: rgba(0,0,0,0.25);\n\t\t\t\t\tmargin-top: -1em;\n\t\t\t\t\tmargin-left: -2em;\n\t\t\t\t}\n\t\t\t\t.profile:hover{\n\t\t\t\t\topacity: 1;\n\t\t\t\t}\n\t\t\t\t.profile button{\n\t\t\t\t\tbackground: rgba(50,50,50,0.9);\n\t\t\t\t\tcolor: #fff;\n\t\t\t\t\tborder: solid 1px;\n\t\t\t\t\tborder-radius: 5px;\n\t\t\t\t\tpadding: 0.75em 1em;\n\t\t\t\t\twidth: 100%;\n\t\t\t\t\tz-index: 5000;\n\t\t\t\t\tposition: relative;\n\t\t\t\t}\n\t\t\t\t.profile h1, .profile h2{\n\t\t\t\t\tmargin: 0;\n\t\t\t\t\tfont-size: 1.5em;\n\t\t\t\t\tline-height: 1.5;\n\t\t\t\t\tmargin-bottom: 0.5em;\n\t\t\t\t\tborder-bottom: solid 1px #777;\n    \t\t\t\tpadding-bottom: 2px;\n\t\t\t\t}\n\t\t\t\t.profile h1{\n\t\t\t\t\twidth: 100%;\n\t\t\t\t\tflex: 0 1 auto;\n\t\t\t\t\tfont-size: 2em;\n\t\t\t\t\tborder-color: #ccc;\n\t\t\t\t}\n\t\t\t\t.profile .exo-number{\n\t\t\t\t\tfloat: right;\n\t\t\t\t\tfont-size: .5em;\n\t\t\t\t\tpadding-top: 1em;\n\t\t\t\t}\n\t\t\t\t.profile .col{\n\t\t\t\t\tflex: 0 1 auto;\n\t\t\t\t\twidth: 40%;\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\tflex-direction: column;\n\t\t\t\t}\n\t\t\t\t.profile .col.wide{\n\t\t\t\t\twidth: 60%;\n\t\t\t\t}\n\t\t\t\t.profile .group{\n\t\t\t\t\tbackground: rgba(0,0,5,0.75);\n\t\t\t\t\tborder: solid 1px #333;\n\t\t\t\t\tborder-radius: 10px;\n\t\t\t\t\tmargin: 0 1em 1em 0;\n\t\t\t\t\tpadding: 1em;\n\t\t\t\t}\n\t\t\t\t.profile ul{\n\t\t\t\t\tlist-style: none;\n\t\t\t\t\tmargin: 0 0 1em 0.5em;\n\t\t\t\t\tpadding:0;\n\t\t\t\t}\n\t\t\t\t.profile ul li{\n\t\t\t\t\tline-height: 1.5em;\n\t\t\t\t}\n\t\t\t\t.profile .group.homeworld{\n\t\t\t\t\twidth: 100%;\n\t\t\t\t\tmargin-bottom: 0;\n\t\t\t\t}\n\t\t\t\t.profile ul.attributes{\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\tflex-wrap: wrap;\n\t\t\t\t}\n\t\t\t\t.profile ul.attributes li{\n\t\t\t\t\twidth: 33%;\n\t\t\t\t}\n\t\t\t\t.profile .settings p{\n\t\t\t\t\ttext-align: justify;\n\t\t\t\t\tline-height: 1.25em;\n\t\t\t\t}\n\t\t\t\t.profile .settings button{\n\t\t\t\t\tmargin-top: 0.25em;\n\t\t\t\t\tmargin-bottom: 0.5em;\n\t\t\t\t\tborder-color: rgba(245,255,245,0.75);\n\t\t\t\t}\n\t\t\t\t.profile .settings button.active{\n\t\t\t\t\tcolor: #000;\n\t\t\t\t\tbackground-color: rgba(245,255,245,0.75);\n\t\t\t\t\tborder-color: rgba(245,255,245,0.75);\n\t\t\t\t}\n\t\t\t\t#gz-logo{\n\t\t\t\t\tdisplay:block;\n\t\t\t\t\tposition: absolute;\n\t\t\t\t\tz-index: 5000;\n\t\t\t\t\tbottom: 0;\n\t\t\t\t\tright: 0;\n\t\t\t\t\theight: 20px;\n\t\t\t\t\twidth: 85px;\n\t\t\t\t}\n\t\t\t\t#gz-logo svg{\n\t\t\t\t\theight: 20px;\n\t\t\t\t\twidth: 85px;\n\t\t\t\t}\n\t\t\t</style>\n\t\t\t<div class="container">\n\t\t\t\t<div class="flip-over">\n\t\t\t\t\t<svg id="flip-over" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 306.4">\n\t\t\t\t\t\t<g>\n\t\t\t\t\t\t\t<path fill="currentColor" d="M205.2,194.1l78.7-70.4c12.5-12.5,34-3.7,34,14.1v40.7c144.6,0,180.7-38.9,180.7-53.5c0-20.3-63.8-41.5-176.2-41.5c-4.5-1-7.7-4.9-7.8-9.5l-1-22.6c-0.1-6.2,5.4-11.1,11.6-10c164,0,181.7,47.7,181.7,90.8c0,63.2-28.9,112.9-189,112.9v33.6c0,17.7-21.5,26.6-34,14.1l-78.7-70.4C197.5,214.5,197.5,201.9,205.2,194.1z"/>\n\t\t\t\t\t\t\t<path fill="currentColor" d="M273.6,79.1l-45.5,37.2c-12.5,12.5-34,3.7-34-14.1V86.4c-129.7,0-180.7,35.2-180.7,49.8c0,20.3,68.4,42.2,141.3,36.9c4.5,1,7.7,4.9,7.8,9.5l1,55.8c0.1,6.2-5.4,11.1-11.6,10C11.4,248.5,5.1,174.2,5.1,131.1c0-63.2,62.2-86.3,189-86.3v-17c0-17.7,21.5-26.6,34-14.1l45.5,37.2C281.3,58.7,281.3,71.3,273.6,79.1z"/>\n\t\t\t\t\t\t</g>\n\t\t\t\t\t</svg>\n\t\t\t\t\t<br/>\n\t\t\t\t\tFlip Over\n\t\t\t\t</div>\n\t\t\t\t<div class="card">\n\t\t\t\t\t<div class="shield"></div>\n\t\t\t\t\t<canvas class="avatar" height="512" width="512"></canvas>\n\t\t\t\t\t<div class="profile"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`,this.container=this.shadowRoot.querySelector(".container"),this.container.addEventListener("click",(t=>this.FlipCard(t))),this.canvas=this.shadowRoot.querySelector("canvas.avatar"),this.profile=this.shadowRoot.querySelector(".profile"),this.canvas.getContext&&(this.ctx=this.canvas.getContext("2d"),this.CheckArtGenerator()?this.Init(this.key):this.ErrorOut())}FlipCard(t){t.preventDefault(),this.container.classList.toggle("flip")}async CheckArtGenerator(){if("function"==typeof f)return!0;if(!this.web3||!this.web3.eth||!this.contractAddress)return!1;const e=new this.web3.eth.Contract(t,this.contractAddress),a=await e.methods.JsSource().call();let n=document.createElement("script");n.type="text/javascript",n.async=!0,n.innerHTML=a,"function"!=typeof f&&document.getElementsByTagName("head")[0].appendChild(n)}async SetOwnerMode(){if(!this.web3||!this.web3.eth)return!1;const f=new this.web3.eth.Contract(t,this.contractAddress),e=await this.web3.eth.getAccounts();if(!e.length)return!1;const a=e[0],n=await f.methods.ownerOfKey(this.key).call();this.ownerMode=a===n,this.RenderStats()}ErrorOut(){this.ctx.fillStyle="#000000",this.ctx.fillRect(0,0,this.canvas.height,this.canvas.width),this.ctx.fillStyle="#ffffff",this.ctx.fillText("ArtGenerator not found",10,20,this.canvas.width-20)}SetTokenMetaAttribute(t,f){this.metaData.attributes.push({trait_type:t,value:f})}GetTokenMetadata(){return this.metaData.image=this.key,this.metaData.external_url=this.key,this.metaData.animation_url=this.key,this.metaData}GetPreviewImage(){return this.canvas.toDataURL()}Init(t){this.artGenerator=new f({ctx:this.ctx,slowkmoDelay:this.dataset.slowmo,renderCallback:()=>{setTimeout((()=>{this.dispatchEvent(new CustomEvent("renderComplete",{detail:{source:this}}))}),2e3)}}),this.keyPairs4=t.match(/.{1,1}/g).map((t=>({hex:t,dec:parseInt(t,16)}))),this.keyPairs8=t.match(/.{1,2}/g).map((t=>({hex:t,dec:parseInt(t,16)}))),this.keyPairs16=t.match(/.{1,4}/g).map((t=>({hex:t,dec:parseInt(t,16)}))),this.colorPalette={atmosphere:this.GetColorByKeyIndex(29,30,31,.25),hair:this.GetColorByKeyIndex(23,24,25),bodPrimary:this.GetColorByKeyIndex(16,17,18),bodSecondary:this.GetColorByKeyIndex(19,20,21),tk:this.GetColorByKeyIndex(26,27,28)},this.SetupStats(),this.SetupAssets(),this.renderMode="background",this.Render(),this.artGenerator.UpdateCanvas(),this.panelBackground=this.canvas.toDataURL(),this.artGenerator.ResetUpdateCanvas(),this.artGenerator.ResetContext(),this.renderMode=null,this.Render(),this.artGenerator.UpdateCanvas(),this.RenderStats(),this.SetOwnerMode()}DrawBodyPart(t,f,e,a,n){if(this.stats.attributes.push(t),t=this.assets[t],"background"===this.renderMode)return;let i=0,s=0;if("string"==typeof e){let[t,f]=e.split("|");e=parseInt(t),s=parseInt(f)}"string"==typeof f&&"y"===f.substr(0,1)&&(f.length>1&&(i=parseInt(f.substr(1))),f=Math.floor(this.bodyData[e]/8));let r=this.bodPos.x+f+s,o=this.bodPos.y-18+e+i,d={asset:t.data,x:r,y:o,fillColor:a};this.artGenerator.DrawAsset(d),n&&this.artGenerator.DrawAsset({...d,x:this.bodPos.x-f-s,mirrorH:!0})}DrawBody(t,f){let e=Math.floor(this.keyPairs4[0].dec/4)+1;if(this.stats.body.type=e,"background"===this.renderMode)return;let a=this.keyPairs8.length/Math.pow(2,Math.floor(this.keyPairs4[1].dec/4)+1),n=[];for(let t=0;t<this.keyPairs8.length;t+=a)n.push(this.keyPairs8[t].dec);this.StretchVals(n,a-1,0),this.bodyData=this.artGenerator.SortBodyData(n,e),this.artGenerator.BodyBrush(this.bodyData,this.colorPalette.bodPrimary,t,f)}DrawGround(){if("subject"!==this.renderMode)for(let t=0;t<128;t++){const f=2*Math.floor(Math.sqrt(Math.pow(768,2)-Math.pow(t-64,2)));this.artGenerator.DrawCol(t,848-f/2,f,"#888888")}}DrawLandscape(){let t=this.FilterRange(this.keyPairs8,128,192,90,!0);this.stats.mountains.push(...t),this.StretchVals(t,Math.floor(160/t.length)-1,0);let f=this.FilterRange(this.keyPairs8,112,128,90,!0);if(this.stats.mountains.push(...f),this.StretchVals(f,Math.floor(160/f.length)-1,0),"subject"!==this.renderMode){for(let f=0;f<t.length;f++){let e=t[f]/2;this.artGenerator.DrawCol(f,128-e,e,"#666666")}for(let t=0;t<f.length;t++){let e=f[t]/2;this.artGenerator.DrawCol(t,128-e,e,"#444444")}}}DrawCelestialBodies(){for(let t=1;t<=Math.floor(this.keyPairs8[0].dec/100);t++){if(this.stats.moons.push(this.keyPairs8[3*(t+1)].dec/4),"subject"===this.renderMode)return;this.artGenerator.DrawMoon(this.keyPairs8[1*(t+1)].dec/2,this.keyPairs8[2*(t+1)].dec/2,this.keyPairs8[3*(t+1)].dec/4,this.artGenerator.GetGreyColor(255-25*t))}}DrawStarfield(){if("subject"!==this.renderMode)for(let t=0;t<this.keyPairs8.length;t+=2){let f=this.keyPairs8[t].hex.substr(1,1)+this.keyPairs8[t+1].hex.substr(1,1),e=Math.floor(parseInt(f,16)/100);this.artGenerator.DrawStar(this.keyPairs8[t].dec,this.keyPairs8[t+1].dec,e)}}GetColorByKeyIndex(t,f,e,a){return a=a||1,`rgba(\n\t\t\t${this.keyPairs8[t].dec},\n\t\t\t${this.keyPairs8[f].dec},\n\t\t\t${this.keyPairs8[e].dec},\n\t\t\t${a}\n\t\t)`}StretchVals(t,f,e){let a=1;for(e=e||0;a<=t.length;){let n=t[a-1],i=((t[a]||t[a-1])-n)/(f+e),s=[];for(let e=0;e<f;e++)s.push(t[a-1]+i*(e+1));if(t.splice(a,0,...s),a+=f+1,a>300)break}}FilterRange(t,f,e,a,n){let i=[];for(let s=0;s<t.length;s++){let r=t[s];n&&s<t.length-4&&(t[s].dec>e||t[s].dec<f)&&(t[s+1].dec>e||t[s+1].dec<f)&&(t[s+2].dec>e||t[s+2].dec<f)&&(t[s+3].dec>e||t[s+3].dec<f)?s+=4:r.dec<e&&r.dec>f?i.push(r.dec):i.push(a)}return i}ProbabilitySelect(t,f,e,a){if(1-this.keyPairs4[t].dec/16>f)return!1;a[Math.floor(a.length*(this.keyPairs4[e].dec/16))]()}SetupStats(){this.stats={planet:this.stars[Math.floor(this.keyPairs4[2].dec/2)]+" "+this.numerals[Math.floor(this.keyPairs4[3].dec/2)],atmosphere:{r:this.keyPairs8[29].dec,g:this.keyPairs8[30].dec,b:this.keyPairs8[31].dec},moons:[],mountains:[],body:{type:"",primarycolor:{r:this.keyPairs8[16].dec,g:this.keyPairs8[17].dec,b:this.keyPairs8[18].dec},secondarycolor:{r:this.keyPairs8[19].dec,g:this.keyPairs8[20].dec,b:this.keyPairs8[21].dec},haircolor:{r:this.keyPairs8[23].dec,g:this.keyPairs8[24].dec,b:this.keyPairs8[25].dec}},attributes:[]}}SetupAssets(){this.assets={hair:{label:"Hair",data:["0000000000010000000","0000000000140000000","0000000000740000000","0000000001d40100000","0000000001d00500400","0000055007d00500400","000001f407d41d01400","0000007d07f45d17400","0000007d55f57d5d400","0001557ffffffff5000","0055fffffddff7f4100","01d7fffff777d7f4500","05417f5f7fff75f5d00","10005fddffffff7f415","00005fd7df7ff57fd74","00157ffff5fffffffd0","01557ffff7fffffff40","05405fffffff7f55750","040007fff77d1d00500","000007f551140500000","00001f5001140040000","0000150000100000000","0000500000000000000"]},horns:{label:"Horns",data:["0000001000000","0000007400000","0000007400000","0000007400000","000001fd00004","140001fd0001d","1d0001fd0007d","1f4001fd001f4","07d007ff401f4","07f407ff407f4","01f407ff41fd0","01fd07ff41fd0","01ff41fd07fd0","01ff405407fd0","01fd000001f40","0054000000500"]},feathers:{label:"Feathers",data:["00000001000000000","00000001400000000","00000001d00000000","00000001d00000000","00000001d00000050","00050001d00000140","00014001d00001500","00005001f40007400","00007401f4001d055","00001d01f400741d0","15001f41fd01d0740","01540741fd07d1d00","007d07d1fd1f47d00","001f47d1fd1f5f400","0007d7d1fd7f7d000","0001f7f5fd7df4000","0001fdfdfdf7f4000","00007dfdfff7f4000","00007dfdffdfd0000","00007f7f7fdfd0000","00001f7f7f7fd0000","00001fdf7f7f40000","00001fdf7f7f40000","00000fdf7f7f00000","000003fffffc00000","000000fffff000000","0000000fff0000000"]},antannae:{label:"Antannae",data:["0005","0015","0054","0140","0100","0400","0400","0400","1000","1000","1000","1000","1000","1000","1000","1000","1000","1000","0400","0400","0400"]},fin:{label:"Fins",data:["100000","140400","1d5400","1f5d00","1f7f50","7dfdd0","7df7d0","77dff4","7f7fd5","7ff574","7f5ff4","fffd55","f55400"]},eyes:{label:"Eyes",data:["01400140","06900690","1aa41aa4","6aa96aa9","6aa96aa9","6a596a59","69556955","19541954","06500650","01400140"]},sleepyeyes:{label:"Eyes",data:["05500550","1ff41ff4","1ffd7ff4","7ffd7ffd","7ffd7ffd","55555555","65596559","65596559","19641964","06900690","01400140"]},angryeyes:{label:"Eyes",data:["01000000040","10400000104","45500000551","15540001554","05554015550","01555055540","01a55555a40","01955555640","01956595640","01a5a5a5a40","006a906a900","001a401a400","00050005000"]},zetaeyes:{label:"Compound Eyes",data:["50000000005","55000000055","55500000555","55554015565","55555055555","15565055564","15565055594","05694015a50","00550005500"]},batwing:{label:"Wings",data:["0000000014000000000000","0000000050000000000000","0000000155000000000000","000000155a554000000000","0000005a65aa9400000000","000001a659556940000000","0000065596555694000000","0000595595955569400000","0001a55565695556900000","0006555565565555650000","00195555655595555a4000","0065555559556555559000","0195555559555955556400","0195555559555655555900","0655555556555595555640","0655555556555595555590","0655555556555565555550","1955555556555555550154","1955555555955555500014","1955555555955415400001","1555401555954001000000","1554000055540000000000","1540000005500000000000","5500000000500000000000","5400000000000000000000","5000000000000000000000","4000000000000000000000","4000000000000000000000"]},butterflywing:{label:"Wings",data:["000000000000001555550000","000000000000155555555400","000000000005555555555540","0000000001557ffff57f5554","00000000155ffffffd5ffd55","000000015555ffffff57fd55","000000057d55ffffff57ff55","00000057ff55ffffff57ff54","0000017fff57fffff557ff54","000005fffd555555557ffd50","000017ffd5555555555ffd50","00005ffd555555555555f540","00017fd55555555555555500","0005f5555ff5ffffd5555400","0017d55ffffd7fffff555000","005f557ffffd5fffffd55000","017d5ffffff57ffffff54000","01f5ffd55555fffffff50000","05d5f5555555557ffff50000","055f555555555555ffd50000","157557fffff555555f540000","1557fffffffd5ff555540000","155d557ffffd57ffd5540000","155555555ffd57fffd540000","0555555555755ffffd500000","055ffd5555557fffff500000","01555ffd555555ffff500000","015557ff55550555fd400000","015f555ff555405555400000","0057d557ffd5500155000000","0055fd557ff5500000000000","005d7d557ffd500000000000","001f5fd55ffd500000000000","001757f557fd500000000000","0017d5fd55f5500000000000","0015f57f5555500000000000","0005f57fd555500000000000","0005fd5ff555500000000000","00057d5ffd55500000000000","00057f57fd55500000000000","00057f55ff55400000000000","00017f55ff55400000000000","00017fd5ff55400000000000","00017fd57555000000000000","00017fd55555000000000000","00017fd55554000000000000","00017ff55554000000000000","00017ff55550000000000000","00015ff55540000000000000","00015fd55500000000000000","000155555000000000000000","000055550000000000000000"]},armanthro:{label:"Hands",data:["0000000000000000400","0000000000000001d00","0000000000000007f40","000000000000001fd00","000000000000007f400","00000000000001fd000","00000000000007f4000","0000000000001fd0005","0000000150007f4015d","00000001d001fd057fd","00000001f417f45ffd5","000000017d7f45ff540","000000007ffd7fd5000","000000001ffff540000","000000001fff5555554","000000005ffffffffd4","00000015ffff5555550","0000057d57d50000000","00015f5401400000000","0057d50000000000000","15f5400000000000000","3d50000000000000000","1400000000000000000"]},pincer:{label:"Pincer Claws",data:["0000000540000","0000001fd4000","0000007ffd000","000001ffff400","000001fffd400","000001fff7d00","000001ffdff40","0000007fdffd0","0000007f7ffd0","00000015fffd4","00000007ff574","00000007d5ff4","000000057fff4","00000017ffffd","0000001fffffd","0000007fffffd","0000007fffffd","0000007ffd5fd","0000001557f55","0000001fffffd","0000007fffffd","000001ffffffd","000017ffffff4","00007fffffff4","0001ffffffff4","0007ffffffff4","001fffffffff4","007ffffffffd0","01fffffffffd0","01fffffffff40","07ff5ffffff40","07f507ffffd00","1f5007ffff400","1d001ffffd000","14007fffd4000","1005fffd40000","015fffd400000","17fffd4000000","7fff540000000","1555000000000"]},flipper:{label:"Flippers",data:["00555000000","01fff500000","17ffff40000","3fffffd0000","1ffffff4000","07fffffd000","01ffffff400","007dffffd00","0015ffffd00","0007fffff40","001ffffff40","001ffffffd0","0007fffffd0","0007ffffff4","0001ffffff4","00007fffff4","00007fffffd","00001fffffd","00001fffffd","00001fffffd","000007ffffd","000007ffffd","000007ffffd","000007ffffd","000007ffffd","000001ffffd","000001ffffd","000001ffff4","000001ffff4","000001ffff4","000001fffd0","000001fffd0","000001fff40","000007fff40","000007ffd00","000007ffd00","000007ff400","000007ff400","000007fd000","000007fd000","000007f4000","000007d0000","000007d0000","00000740000","00000100000"]},leganthro:{label:"Biped",data:["d400000000","f400000000","f400000000","f400000000","7d00000000","7d00000000","7d00000000","7d00000000","1f40000000","1f40000000","1f40000000","1f40000000","07d0000000","07d0000000","07d0000000","07d0000000","01f4000000","01f4000000","01f4000000","01f4000000","007d000000","007d000000","007d000000","007d000000","001f400000","001f400000","001f400000","001f400000","0007d00000","0007d00000","0007d00000","0007d00000","0001f45540","0001f5ffd0","0001fffff4","00007ffffd","0001fffffd","0001fffffd","00007ffffd","0000155554"]},leginsect:{label:"Quadraped",data:["0001500000000000000000","0005f40000000540000000","001df40155555fd0000000","001df457fffffdd0000000","007f75fffffff474000000","01ff77ffffffd074000000","07ff77ffffff4074000000","07ff77fffffd0074000000","1fff77fffff4001d000000","1fff77ffffd0001d000000","1fff77fffd40001d000000","1fffddfff400001d000000","1fff5dff5000001d000000","1ffdddd500000007400000","05f55d4000000007400000","00501d0000000007400000","00001d0000000007400000","00001d0000000007400000","00001d0000000001d00000","00001d0000000001d00000","0000074000000001d00000","0000074000000001d00000","0000074000000001d00000","0000074000000000740000","0000074000000000740000","0000074000000000740000","0000074000000000740000","0000074000000000740000","00000740000000001d0000","000001d0000000001d0000","000001d0000000001d0000","000001d0000000001d0000","000001d0000000001d0000","000001d000000000074000","000001d000000000074000","000001d000000000075400","000000740000000007d550","0000005400000000014155"]},tentacle:{label:"Tentacles",data:["000000000000000001554000","000000000000000017ffd000","00000000000000005f557400","00000000000000007d001d00","0000000000554001f4000500","0000000005ffd401f4000000","000000001ffffd01f4000000","000000001ffffd01fd000000","000000001dffff407d000000","0000000001ffff407f500000","0000000001ffff405ff50000","0000000001ffffd01fff5400","00000000007fffd005fffd40","00000000007fffd0005fffd0","00000000007ffff400057ff4","00000000001ffff400001ffd","00000000001ffff4000007fd","00555500001ffffd000001fd","01ffff400007ffff500001fd","07ffffd00007fffff40001fd","1fd55ff40007fffffd0007fd","1f4007fd4007ffffff555ffd","1d0001ffd01ffd7ffffffffd","1d00007ff57ffd1ffffffff4","1d000017fffff41fffffffd0","1d000005ffffd005ffffff40","1d0000017ffd40015ffff500","074000001554000005555000","014000000000000000000000"]},telekinesis:{label:"Telekinetic",data:["0000000000000000000000000003f0000000000000","0000000000000000000000000003fc000000000000","0000000000000000000c0000003ffc000000000000","0000000000000000003fc0003cfff0000000000000","0000000000000000003ff000fffaf0000000000000","000000000000000000fef0003feaf0000000000000","000000000000000000fafc003eaafc000000000000","000000000000000000fabc00feaabc000000000000","000000000003ffc3fffabfc3faaabc000000000000","00000000000ff003ffffafffffbfff0c03f0000000","0000000000fc0003eafffaffffffffffcffc000000","000000003ff0000ffff3ffffc3f00fffffbf000000","000000003fc0000fffc03ffc00f0000ffeafc00000","000000f0ffc000000f000f0000000003eaabc00000","000003ffff0000000000000000000003feabc00000","0000ffffc00000000000000000000000ffabf00000","0000ffaf0000000000000000000000000fabf00000","0000feaf0000000000000000000000000febc00000","00003faf00000003000000003ffffc0003ebc00000","00000fbf0000003c000000000fffffc003ffc00000","00000ffc000000f00000000000ffaf0000ffc00000","00003ff00003ffc000000000000fef000003c00000","00003c00000fff00000000000003fff00003c00000","00003c00000fff00000000000000fbf00000c00000","0000fc00000fff00000000000000faf00000f00000","000ffc00000fc000000000000000faf00000300000","00ffff000003c000000000000000fafc00003c0000","0ffebf000003c000000000000000fffffc00000000","0ffafc00000fc0000000000000003ffffc00000fc0","03fff0000003c00000000000000000febc00000ffc","003fc0000003fc00000000000000003efc000003fc","003ffc000003ff00000000000000003ff0000003ff","003eff00003fff00000000000000003fc0000003ef","00febf00003fff0000000000000000ffc0000003ef","03fafc00000ff00000000000000000fbf000000fef","03fbf0000003f00000000000000003fafc0000ffaf","00ffc0000000f00000000000000000fabf0003feaf","003fc0000000f00000000000000000faafc003eaff","003fc0000000f00000000000000003faabc003ebfc","00ffc0000000f0000000000000000feaafc003efc0","03fbf0000003f00000000000000003fabf0003ef00","0feafc000003fc0000000000000000fffc0003ef00","ffaabc00003fff0000000000000000fff0000fefc0","ffaabf0003ffafc000000000000003c000003fbff0","ffffff0003faabc000000000000003c00003feffc0","03fffc000feaabc00000000000000300000ffaf000","0300fc000feaabc00000000000000300000faaf000","00003c0003feffc0000000000000f000000faaf000","00003c0000ffff00000000000000f00000ffaafc00","00003f00000fc0000000000000000000003fffbc00","00003fc00003c000000000000000000000ffffff00","00003fc00003c00000000000000000000ff003ef00","0003ffc00003c0000000000000000000ffc003fff0","000ffbc00000c000000000000000000fff0000ffc0","0003ffc00000c000000000000000000ff00000ff00","00003ffc0000c00000000000000000000000003f00","0000003fc000f00000000000000000000000000000","0000000ff000300000000000000000000000000000","00000000f000000000000000000000000000000000","000000003c00000000000000000000000000000000"]},precog:{label:"Precognition",data:["00000000000000003fffc0000000000000000000","000000000000003ffaaac0000000000000000000","00000000000003faaaaac0000ffc000000000000","00000000000003aabfffc0000eafc00000000000","00000000000003fff00000000faafc0000000000","00000000000000000000000003feafc000000000","000000000000000000000000000feaf000000000","0000000000000000000000000000febc00000000","00000000ff000000ffffc03fc0000fac00000000","00000003eb00000feaaac03aff0003fc00000000","0000000faf00000eaaafc03aabf0000000000000","0000003ebc00000ffffc003feabc000000000000","000000faf003fc0000000000ffbc000000000000","000003ebc00fac000000000003f0000000000000","00000faf00febc000000000000000fc000000000","00003ebc03eaf0000fffff0000000ef0003f0000","00003af00fafc0003eaaab0000003ebc00fbc000","00003bc00ebc0000faaaaf003f000faf00fac000","00003f000ef000003ffffc00fbf003ebc03ef000","000000000fc00c0000000000fabc00faf00ebc00","0000000000003fc0000000003faf003eb00fac00","000000000000fbc00000000003ebf00fb003af00","0000000f0003ef000000000000feb003f003eb00","0000003fc00fbc0000000000000fb0000000ebc0","000000fac03ef000000000000003f0000000fac0","000000ebc0fac000000000000000000000003ac0","000003eb00ebc00000000000000000000fc03ef0","03fc03af00ef000000000000000000000ef00fc0","03ac03ac00fc000000000000000000000eb00000","03ac0fbc0000000000000000000000fc0fbc0000","0fbc0fb00000000000000000000000ec03ac0000","0eb003f00000000000000000000000ef03ac0000","0eb000000000000000000000000000eb03ef0000","0eb000000c00000000000000000000eb00eb0000","0eb000003f00000000000000000000ebc0eb0000","0eb00000fb00000000000000000000fac0ff0000","3eb03fc0eb000000000000000000003ac0000000","3ab03ac0eb000000000000000000003ac03f00fc","3ef03ac0eb000000000000000000003ac0fb00ef","0ec03ac0eb000000000000000000003ac0eb03eb","0fc03ac0eb000000000000000000003ac0eb03ab","00003ac0ebc00000000000000000003ac0eb03ab","00003ac0fac0000000000000000000fbc0eb03af","00003ac03bc0000000000000000000eb00eb03ac","00003ec03f00000000000000000000eb00eb03ac","00000fc00000000000000000000000eb00ef03ac","000003000000000000000000000000ef00fc03ac","000000000000000000000000000000fc00f00fbc","0000000000000000000000000000000000000eb0","00300000003c0000000000000000000000000eb0","00fc003c00ff0000000000000000000000000ff0","00ef00ff00ebc00000000000000000003f000000","00eb00ebc0faf000000000000000f000fb000000","00fbc0fac03eb000000000000003fc00eb000000","003ac03ef00fbf0000000000003fbc03eb000000","003ef00ebc03ebc00000000000faf003af000000","000eb00fac00fac00000000003ebc00fbc000000","000fbc03ef003fc0000000003faf003ef0000000","0003af00fc000f00000000003abc003ac0000000","0003eb00300000003fffff003ff0003fc03f0000","0000fb00000000003aaaabc00f00000000fbc000","00003b00000fc0003eaaabc00000000003eb0000","00003f00003ef0000fffff000003fc000fab0000","00000000003ebf0000000000003fac003ebc0000","00000000000fabf00000000003fabc00faf00000","000000000003fabc000000003fabf003ebc00000","0000000000003fac00ffff003abf000faf000000","00000000030003fc03eaabc03ff0003ebc000000","000000000ff0000003aaaac00f00003af0000000","000000000ebf000003feafc00000003fc0000000","000000000fabc000000ffc000000000000000000","0000000003eaff00000000000000000000000000","0000000000feabf00000000003c0000000000000","00000000000feabc0000000ffff0000000000000","000000000000ffac0000fffeaab0000000000000","00000000000003fc0000eaaaaff0000000000000","00000000000000000000eaaffc00000000000000","00000000000000000000fffc0000000000000000"]}};for(let t of Object.keys(this.assets))for(let f=0;f<this.assets[t].data.length;f++){let e=this.assets[t].data[f].split(""),a=[];for(;e.length>0;){let t=parseInt(e.shift(),16).toString(4).split("");1==t.length&&t.unshift(0),a.push(...t)}this.assets[t].data[f]=a.map((t=>+t))}}})})();